{% set sidenav_active='event_course_query' %}
{% extends "web/event/base.tmpl" %}
{% import "web/util.tmpl" as util with context %}
{% import "web/generic.tmpl" as generic with context %}
{% set jshint='strong' %}
{% block scripts %}{{ util.cdedb_script('cdedb_queryform.js') }}{{ util.cdedb_script('cdedb_helper.js') }}{% endblock %}
{% block title %}
    {% trans title=ambience['event']['title'] -%}
    	Courses ({{ title }})
    {%- endtrans %}    
{% endblock %}
{% block heading %}
    <h1 class="title">
        {% trans -%}Courses{%- endtrans %}
        <small>{{ util.make_icon('blackboard') }} {{ ambience['event']['title'] }}</small>
    </h1>
{% endblock %}
{% block breadcrumb %}
{{ super() }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/course_query"), gettext("Courses"), active=True) }}
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-md-4">
            <div class="p button-par">
                {{ util.href(cdedblink("event/create_course"), gettext("Create Course"),
                             readonly=is_locked, icon='plus', aclass='btn btn-sm btn-success') }}
            </div>
        </div>
        <div class="col-md-8">
            {{ generic.place_default_queries("event/course_query", default_queries) }}
        </div>
    </div>

    {{ generic.format_query(spec, titles, choices, cdedblink('event/course_query'),
                            selection_default=('course.shortname',)) }}

    {% if values['is_search'] %}
        <h3>{% trans -%}Result{%- endtrans %} [{{ result|length }}]</h3>

        {{ generic.display_query_result(result, query, titles, choices) }}

    {% endif %}
{% endblock %}
