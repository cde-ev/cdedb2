{% set sidenav_active='event_downloads' %}
{% extends "web/event/base.tmpl" %}
{% import "web/util.tmpl" as util with context %}
{% block title %}
    {% trans title=ambience['event']['title']|e -%}
        Downloads for Event {{ title }}
    {%- endtrans %}
{% endblock %}
{% block breadcrumb %}
{{ super() }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/downloads"), gettext("Downloads"), active=True) }}
{% endblock %}
{% block heading %}
    <h1 class="title">
        Downloads <small>{{ util.make_icon('blackboard') }} {{ ambience['event']['title']|e }}</small>
    </h1>
{% endblock %}
{% block content %}
    <h3>{% trans -%}Printables{%- endtrans %}</h3>
    <table class="table table-slim">
        <tbody>
            {% for name, endpoint in [("Namensschilder", 'event/download_nametags'),
                                      ("Bastelsatz Kurseinteilung",'event/download_course_puzzle'),
                                      ("Bastelsatz Unterkunftseinteilung",'event/download_lodgement_puzzle'),
                                      ("Teilnehmerliste",'event/download_participant_list'),
                                      ("Kurslisten",'event/download_course_lists'),
                                      ("Unterkunftslisten",'event/download_lodgement_lists')] %}
                <tr>
                    <td>{{ name }}</td>
                    <td>{{ util.href(cdedblink(endpoint, {'runs': 0}), gettext("LaTeX"), icon='download') }}</td>
                    <td>{{ util.href(cdedblink(endpoint, {'runs': 2}), gettext("PDF"), icon='file') }}</td>
                </tr>
            {% endfor %}

        </tbody>
    </table>

    <h3>{% trans -%}Export{%- endtrans %}</h3>
    <table class="table table-slim">
        <tbody>
            <tr>
                <td>
                    {% trans -%}Full Event Export{%- endtrans %}<br />
                    <small>({% trans -%}for Initilization of the Offline-VM and external Tools{%- endtrans %})</small>
                </td>
                <td>{{ util.href(cdedblink('event/download_export'), gettext("JSON-File"), icon='download') }}</td>
            </tr>
            <tr>
                <td>{% trans -%}Registrations{%- endtrans %}</td>
                <td>{{ util.href(cdedblink('event/download_csv_registrations'), gettext("CSV-File"), icon='download') }}</td>
            </tr>
            <tr>
                <td>{% trans -%}Courselist{%- endtrans %}</td>
                <td>{{ util.href(cdedblink('event/download_csv_courses'), gettext("CSV-File"), icon='download') }}</td>
            </tr>
            <tr>
                <td>{% trans -%}Lodgementlist{%- endtrans %}</td>
                <td>{{ util.href(cdedblink('event/download_csv_lodgements'), gettext("CSV-File"), icon='download') }}</td>
            </tr>
            <tr>
                <td>{% trans -%}Courselist for exPuls{%- endtrans %}</td>
                <td>{{ util.href(cdedblink('event/download_expuls'), gettext("TeX-Code"), icon='download') }}</td>
            </tr>
        </tbody>
    </table>
{% endblock %}
