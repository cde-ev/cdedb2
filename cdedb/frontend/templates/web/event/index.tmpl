{% set sidenav_active='event_index' %}
{% extends "web/event/base.tmpl" %}
{% import "web/util.tmpl" as util with context %}
{% block title %}Veranstaltungen{% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen", active=True) }}
{% endblock %}
{% block content %}
    <h3>Aktuelle Veranstaltungen</h3>
    {% if open_events %}
        <ul>
            {% for event_id, event in open_events|dictsort|reverse %}
                <li>
                    {{ util.href(cdedblink("event/show_event", {"event_id": event_id}), event['title']) }}
                    <br />
                    {{ event['begin']|date(lang=lang)|e }}&#8239;–&#8239;{{ event['end']|date(lang=lang)|e }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">
            Zur Zeit sind keine Veranstaltungen zur Anmeldung freigegeben.
        </p>
    {% endif %}

    {% if orga_events %}
        <h3>Organisierte Veranstaltungen</h3>
        <ul>
            {% for event_id, entry in orga_events|dictsort|reverse %}
                <li>
                    {{ util.href(cdedblink("event/show_event", {"event_id": event_id}), entry['title']) }}
                    <br />
                    {{ entry['begin']|date(lang=lang)|e }}–{{ entry['end']|date(lang=lang)|e }}
                    <br />
                    <span class="small">
                        {{ util.href(cdedblink('event/registration_query', {'event_id': event_id}),
                                     "Anmeldungen", icon='list') }}
                        &bull;
                        {{ util.href(cdedblink('event/stats', {'event_id': event_id}),
                                     "Statistik", icon='stats') }}
                        &bull;
                        {{ util.href(cdedblink('event/course_stats', {'event_id': event_id}),
                                     "Kurse", icon='book') }}
                    </span>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if other_events %}
        <h3>Weitere Veranstaltungen</h3>
        <ul>
            {% for event_id, event in other_events|dictsort|reverse %}
                <li>
                    {{ util.href(cdedblink("event/show_event", {"event_id": event_id}), event['title']) }}
                    <br />
                    {{ event['begin']|date(lang=lang)|e }}&#8239;–&#8239;{{ event['end']|date(lang=lang)|e }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
