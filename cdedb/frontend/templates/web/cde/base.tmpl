{% set mainnav_active='cde' %}
{% extends "web/base.tmpl" %}
{% import "web/util.tmpl" as util with context %}
{% block breadcrumb %}
    {{ util.breadcrumb_link(cdedblink("cde/index"), gettext("Members"), readonly=("cde" not in user.roles)) }}
{% endblock %}
{% block navigation %}
    {% if "cde" in user.roles %}
        <h3 class="heading-sidebar">{% trans %}Members{% endtrans %}</h3>
        <div class="list-group tear-down">
            {{ util.href(cdedblink("cde/index"), gettext("Overview"), aclass="list-group-item",
                    icon="glyphicon-triangle-right", active=(sidenav_active=='cde_index')) }}
            {% if "searchable" in user.roles %}
                {{ util.href(cdedblink("cde/member_search"), gettext("CdE-Member Search"), aclass="list-group-item", icon="glyphicon-search",
                        active=(sidenav_active=='cde_member_search')) }}
            {% elif 'member' in user.roles %}
                {{ util.href(cdedblink("cde/consent_decision_form"), gettext("Privacy Policy"),
                             aclass="list-group-item", icon="glyphicon-check", active=(sidenav_active=='cde_consent_decision')) }}
            {% endif %}
        </div>

        {% if is_admin %}
            <div class="list-group tear-down">
                {{ util.href(cdedblink("cde/user_search"), gettext("Manage Users"), aclass="list-group-item", icon="glyphicon-user",
                        active=(sidenav_active=='cde_manage_users')) }}
                {% if "finance_admin" in user.roles %}
                    {{ util.href(cdedblink("cde/lastschrift_index"), gettext("Direct Debit Authorizations"), aclass="list-group-item",
                            icon="glyphicon-euro", active=(sidenav_active=='cde_lastschrift')) }}
                    {{ util.href(cdedblink("cde/parse_statement_form"), gettext("Parse Bank Statement"), aclass="list-group-item",
                            icon="glyphicon-euro", active=(sidenav_active=='cde_parse')) }}
                    {{ util.href(cdedblink("cde/money_transfers_form"), gettext("Enter Bank Transfers"), aclass="list-group-item",
                            icon="glyphicon-euro", active=(sidenav_active=='cde_transfers')) }}
                    {{ util.href(cdedblink("cde/show_semester"), gettext("Semester Management"), aclass="list-group-item",
                            icon="glyphicon-hourglass", active=(sidenav_active=='cde_semester')) }}
                    {{ util.href(cdedblink("cde/view_cde_log"), gettext("CdE Log"), aclass="list-group-item", icon="glyphicon-list-alt",
                            active=(sidenav_active=='cde_log')) }}
                    {{ util.href(cdedblink("cde/view_finance_log"), gettext("Finance Log"), aclass="list-group-item", icon="glyphicon-list-alt",
                            active=(sidenav_active=='cde_finance_log')) }}
                {% endif %}
            </div>
        {% endif %}

        {% if "member" in user.roles %}
            <div class="list-group tear-down">
                {{ util.href(cdedblink("cde/list_past_events"), gettext("Past Events"), icon="glyphicon-calendar",
                        aclass="list-group-item", active=(sidenav_active=='cde_past_events')) }}
                {% if is_admin %}
                    {{ util.href(cdedblink("cde/institution_summary"), gettext("Manage Institutions"), icon="glyphicon-briefcase",
                            aclass="list-group-item", active=(sidenav_active=='cde_past_events_org')) }}
                    {{ util.href(cdedblink("cde/view_past_log"), gettext("Past Events Log"), icon="glyphicon-list-alt",
                            aclass="list-group-item", active=(sidenav_active=='cde_past_events_log')) }}
                    </div>
                    <div class="list-group tear-down">
                {% endif %}
                {{ util.href(cdedblink("cde/view_misc"), gettext("Miscellaneous"), icon="glyphicon-random",
                        aclass="list-group-item", active=(sidenav_active=='cde_misc')) }}
            </div>
        {% endif %}

        <hr class="strong visible-xs visible-sm" />
    {% endif %}
{% endblock %}
