{% set sidenav_active='event_checkin' %}
{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% set jshint='weak' %}
{% block title %}Checkin ({{ ambience['event']['title']|e }}){% endblock %}
{% block heading %}
    <h1 class="title">
        Checkin
        <small>{{ util.make_icon('blackboard') }} {{ ambience['event']['title']|e }}</small>
    </h1>
{% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen") }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/checkin"), "Checkin", active=True) }}
{% endblock %}
{% block content %}
    <div>
        Namen suchen (Gro√ü-/Kleinschreibung!):
        <input type="text" name="selector" id="selector" class="jsEnabled" value="" disabled>
    </div>
    <ul>
        {% for registration_id, registration in registrations|dictsort %}
            <li class="selectee">
                {{ personas[registration['persona_id']]['given_names']|e }}
                {{ personas[registration['persona_id']]['family_name']|e }}
                <form action="{{ cdedblink('event/checkin')|e }}" method="POST" id="checkinform{{ registration_id|e }}">
                    {{ util.input_hidden(name="registration_id", value=registration_id) }}
                    {{ util.form_input_submit(value="Checkin") }}
                </form>
            </li>
        {% endfor %}
    </ul>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#selector").keyup(function(){
                $(".selectee").hide();
                $(".selectee:contains('" + $(this).val() + "')").show();
            });
        });
    </script>
{% endblock %}
