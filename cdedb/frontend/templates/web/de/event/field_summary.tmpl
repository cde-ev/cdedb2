{% set sidenav_active='event_config' %}
{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% block scripts %}{{ util.jquery_with_ui_preamble() }}{% endblock %}
{% set jshint='strong' %}
{% block title %}Datenfelder konfigurieren ({{ ambience['event']['title']|e }}){% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen") }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/field_summary"), "Felder konfigurieren", active=True) }}
{% endblock %}
{% block content %}
    <form action="{{ cdedblink('event/field_summary')|e }}" method="POST" id="fieldsummaryform">
        <ul>
            {% for anid, entry in ambience['event']['fields']|dictsort %}
                <li>
                    {{ util.form_input_checkbox("delete_{}".format(anid), label="Löschen",
                                                readonly=anid in is_referenced) }}
                    {{ util.form_input_text(name="field_name_{}".format(anid), label="Name", readonly=True) }}
                    {{ util.form_input_select(name="kind_{}".format(anid), label="Typ", entries=(
                        ("str", "String"), ("bool", "Ja/Nein"), ("int", "Zahl"), ("float", "Kommazahl"),
                        ("date", "Datum"), ("datetime", "Datum mit Uhrzeit"))) }}
                    {{ util.form_input_textarea(name="entries_{}".format(anid), label="Auswahlmöglichkeiten",
                                                info="Format ist 'Wert;langer Beschreibungstext' pro Zeile.") }}
                </li>
            {% endfor %}
            <li>
                {{ util.form_input_checkbox("create_-1", label="Anlegen") }}
                {{ util.form_input_text(name="field_name_-1", label="Name") }}
                {{ util.form_input_select(name="kind_-1", label="Typ", entries=(
                    ("str", "String"), ("bool", "Ja/Nein"), ("int", "Zahl"), ("float", "Kommazahl"),
                    ("date", "Datum"), ("datetime", "Datum mit Uhrzeit"))) }}
                {{ util.form_input_textarea(name="entries_-1", label="Auswahlmöglichkeiten",
                                            info="Format ist 'Wert;langer Beschreibungstext' pro Zeile.") }}
            </li>
        </ul>
        <div>
            {{ util.form_input_submit(value="Abschicken", readonly=is_locked) }}
        </div>
    </form>
{% endblock %}
