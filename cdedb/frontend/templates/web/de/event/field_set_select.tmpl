{% set sidenav_active='event_registration' %}
{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% block title %}Feld ausw√§hlen ({{ ambience['event']['title']|e }}){% endblock %}
{% block heading %}
    <h1 class="title">
        Datenfeld setzen
        <small>{{ util.make_icon('blackboard') }} {{ ambience['event']['title']|e }}</small>
    </h1>
{% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen") }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/registration_query"), "Anmeldungen") }}
{{ util.breadcrumb_link(cdedblink("event/field_set_select"), "Datenfeld setzen", active=True) }}
{% endblock %}
{% block content %}
    <form action="{{ cdedblink('event/field_set_select')|e }}" method="GET" id="selectfieldform"
          class="form-horizontal">
        {# jinja does not support list comprehension ... #}
        {% set myentries = [] %}
        {% for field_id, field in ambience['event']['fields']|dictsort %}
            {% if field['association'] == enums['FieldAssociations'].registration %}
                {{ myentries.append((field_id, field['field_name']))|e }}
            {% endif %}
        {% endfor %}
        {{ util.form_input_select("field_id", label="Feld", entries=myentries, small=True) }}
        {{ util.form_input_submit(value="Anzeigen", cancellink=cdedblink('event/registration_query'), icon="", small=True) }}
    </form>
{% endblock %}
