{% set sidenav_active='event_registration' %}
{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% block title %}
    Feld {{ ambience['event']['fields'][values['field_id']|int]['field_name']|e }} setzen
    ({{ ambience['event']['title']|e }})
{% endblock %}
{% block heading %}
    <h1 class="title">
        <em>{{ ambience['event']['fields'][values['field_id']|int]['field_name']|e }}</em> setzen
        <small>{{ util.make_icon('blackboard') }} {{ ambience['event']['title']|e }}</small>
    </h1>
{% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen") }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/registration_query"), "Anmeldungen") }}
{{ util.breadcrumb_link(cdedblink("event/field_set_select"), "Datenfeld setzen") }}
{{ util.breadcrumb_link(cdedblink("event/field_set_form"),
                        ambience['event']['fields'][values['field_id']|int]['field_name'], active=True, icon="tag") }}
{% endblock %}
{% block content %}
    <form action="{{ cdedblink('event/field_set')|e }}" method="POST" id="fieldform" class="form-horizontal">
        {% for registration_id in ordered %}
            {{ util.form_event_field_input(
                ambience['event']['fields'][values['field_id']|int], name="input{}".format(registration_id),
                label="{} {}".format(
                    personas[registrations[registration_id]['persona_id']]['given_names'],
                    personas[registrations[registration_id]['persona_id']]['family_name'])) }}
        {% endfor %}
        {{ util.input_hidden(name="field_id") }}
        {{ util.input_hidden(name="reg_ids", value=reg_ids|join(',')) }}
        {{ util.form_input_submit(value="Speichern", cancellink=cdedblink('event/registration_query')) }}
    </form>
{% endblock %}
