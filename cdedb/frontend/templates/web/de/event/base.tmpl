{% extends "web/de/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% block navigation %}
    <ul>
        <li>
            <a href="{{ cdedblink("core/index")|e }}">Start</a>
            <ul>
                <li><a href="{{ cdedblink("core/mydata")|e }}">Meine Daten</a></li>
                <li><a href="{{ cdedblink("core/change_password_form")|e }}">Passwort ändern</a></li>
                {% if is_admin %}
                    <li>
                        <form action="{{ cdedblink('core/admin_show_user')|e }}" method="GET" id="adminshowuserform">
                            <div>
                                {{ util.input_text(name="id_to_show") }}
                                {{ util.input_submit(value="ID") }}
                            </div>
                        </form>
                    </li>
                {% endif %}
            </ul>
        </li>
        {% if "formermember" in user.roles %}
            <li><a href="{{ cdedblink("cde/index")|e }}">CdE</a></li>
        {% endif %}
        {% if "event_user" in user.roles %}
            <li>
                <a href="{{ cdedblink("event/index")|e }}">Veranstaltungen</a>
                <ul>
                    {% if is_admin %}
                        <li><a href="{{ cdedblink("event/create_user_form")|e }}">Neuen Nutzer anlegen</a></li>
                        <li><a href="{{ cdedblink("event/user_search_form")|e }}">Nutzersuche</a></li>
                        <li><a href="{{ cdedblink("event/list_past_events")|e }}">alle abg. Veranstaltungen</a></li>
                        <li><a href="{{ cdedblink("event/create_past_event_form")|e }}">abg. Veranstaltung anlegen</a></li>
                        <li><a href="{{ cdedblink("event/list_events")|e }}">alle DB-Veranstaltungen</a></li>
                        <li><a href="{{ cdedblink("event/create_event_form")|e }}">DB-Veranstaltung anlegen</a></li>
                    {% endif %}
                    <li>
                        aktuelle Veranstaltungen
                        <ul>
                            {% for anid, entry in sidebar_events|dictsort|reverse %}
                                <li>
                                    <a href="{{ cdedblink("event/show_event", {"event_id": anid})|e }}">{{ entry['title']|e }}</a>
                                    {% if anid == values.get('event_id') %}
                                        <ul>
                                            {% if not entry['registration_id'] %}
                                                <li><a href="{{ cdedblink("event/register_form", {"event_id": anid})|e }}" {% if entry['locked'] %} disabled {% endif %}>Anmelden</a></li>
                                            {% else %}
                                                <li><a href="{{ cdedblink("event/registration_status", {"event_id": anid})|e }}">
                                                    Meine Anmeldung
                                                </a></li>
                                                {% if entry['use_questionnaire'] %}
                                                    <li><a href="{{ cdedblink("event/questionnaire_form", {"event_id": anid})|e }}">
                                                        Fragebogen
                                                    </a></li>
                                                {% endif %}
                                            {% endif %}
                                            {% if anid in user.orga or is_admin %}
                                                <li><a href="{{ cdedblink("event/summary", {"event_id": anid})|e }}">Übersicht</a></li>
                                                <li><a href="{{ cdedblink("event/event_config", {"event_id": anid})|e }}">Konfiguration</a></li>
                                                <li><a href="{{ cdedblink("event/registration_query", {"event_id": anid})|e }}">Anmeldungen</a></li>
                                                <li><a href="{{ cdedblink("event/add_registration_form", {"event_id": anid})|e }}" {% if entry['locked'] %} disabled {% endif %}>Neuer Teilnehmer</a></li>
                                                <li><a href="{{ cdedblink("event/lodgements", {"event_id": anid})|e }}">Unterkunft</a></li>
                                                <li><a href="{{ cdedblink("event/field_set_select", {"event_id": anid})|e }}" {% if entry['locked'] %} disabled {% endif %}>Datenfeld setzen</a></li>
                                                <li><a href="{{ cdedblink("event/course_choices", {"event_id": anid})|e }}">Kurswahlen</a></li>
                                                <li><a href="{{ cdedblink("event/downloads", {"event_id": anid})|e }}">Downloads</a></li>
                                                <li><a href="{{ cdedblink("event/checkin_form", {"event_id": anid})|e }}" {% if entry['locked'] %} disabled {% endif %}>Checkin</a></li>
                                            {% endif %}
                                        </ul>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </li>
                </ul>
            </li>
        {% endif %}
        <li>Mailinglisten</li>
        {% if "assembly_user" in user.roles %}
            <li>Versammlung</li>
        {% endif %}
        <li>Dateien</li>
    </ul>
{% endblock %}
