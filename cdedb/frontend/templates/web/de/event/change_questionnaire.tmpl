{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% block title %}Fragebogen bearbeiten ({{ event_data['title']|e }}){% endblock %}
{% block content %}
    <form action="{{ cdedblink('event/change_questionnaire')|e }}" method="POST" id="changequestionnaireform">
        {% with INPUT_SIZE_LABELS = {0: "einzeilig",
                                     2: "mehrzeilig",
                                     3: "mehrzeilig+",
                                     4: "mehrzeilig++",}%}
            <ul>
                {% for entry in questionnaire %}
                    <li>
                        <table>
                            {# jinja does not support list comprehension ... #}
                            {% set myentries = [("", "nur Text", None)] %}
                            {% for field_id, fdata in event_data['fields']|dictsort %}
                                {{ myentries.append((field_id, fdata['field_name'], None))|e }}
                            {% endfor %}
                            {{ util.tab_input_select("field_id_{}".format(loop.index0), title="Abfrage", entries=myentries) }}
                            {{ util.tab_input_text(name="title_{}".format(loop.index0), label="Label/Überschrift") }}
                            {{ util.tab_input_textarea(name="info_{}".format(loop.index0), label="Text") }}
                            {{ util.tab_input_select("input_size_{}".format(loop.index0), title="Eingabefeldgröße",
                                                     entries=((0, INPUT_SIZE_LABELS[0], None), (2, INPUT_SIZE_LABELS[2], None),
                                                              (3, INPUT_SIZE_LABELS[3], None), (4, INPUT_SIZE_LABELS[4], None))) }}
                            {{ util.tab_input_checkbox("readonly_{}".format(loop.index0), label="Schreibgeschützt") }}
                        </table>
                    </li>
                {% endfor %}
            </ul>
            <div>
                {{ util.input_submit(value="Ändern") }}
            </div>
        {% endwith %}
    </form>
{% endblock %}
