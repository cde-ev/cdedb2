{% set sidenav_active='event_users' %}
{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% import "web/de/generic.tmpl" as generic with context %}
{% set jshint='strong' %}
{% block scripts %}{{ util.cdedb_script('queryform') }}{{ util.cdedb_script('helper') }}{% endblock %}
{% block title %}Veranstaltungsnutzersuche{% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen") }}
{{ util.breadcrumb_link(cdedblink("event/user_search"), "Nutzer verwalten", active="True") }}
{% endblock %}
{% block content %}
    {# TODO use macro generic.user_search() here, after moving the specific TITLES to some more generic place #}
    <div class="row">
        <div class="col-md-4">
            <div class="p button-par">
                {{ util.href(cdedblink("event/create_user"), "Nutzer anlegen", icon="plus",
                             aclass="btn btn-success btn-sm") }}
            </div>
        </div>
        <div class="col-md-8">
            {% with TITLES = {
                "minors": "Minderj√§hrige",} %}

                <div>
                    {{ generic.place_default_queries("event/user_search", default_queries, TITLES) }}
                </div>
            {% endwith %}
        </div>
    </div>

    {{ generic.user_search_mask("event", ("pevent_id", "pcourse_id")) }}

    {% if values['is_search'] %}
        <h3>Ergebnis [{{ result|length|e }}]</h3>
        {{ generic.user_search_result(result, "event") }}
    {% endif %}
{% endblock %}
