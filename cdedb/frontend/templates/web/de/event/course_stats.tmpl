{% set sidenav_active='event_course_stats' %}
{% extends "web/de/event/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% block title %}Kurs-Ãœbersicht ({{ ambience['event']['title']|e }}){% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("event/index"), "Veranstaltungen") }}
{{ util.breadcrumb_link(cdedblink("event/show_event"), ambience['event']['title'], icon="blackboard") }}
{{ util.breadcrumb_link(cdedblink("event/course_stats"), "Kurse", active=True) }}
{% endblock %}
{% block content %}
    {# TODO incorporate active_parts, max_size, min_size of courses #}
    <table>
        <tr>
            <th>Nummer</th>
            <th>Kurs</th>
            <th>Kurzname</th>
            {% for part_id, part in ambience['event']['parts']|dictsort %}
                <th colspan="4">{{ part['title']|e }}</th>
            {% endfor %}
        </tr>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            {% for part_id, part in ambience['event']['parts']|dictsort %}
                <th>zugewiesen</th>
                <th>Erstwahl</th>
                <th>Zweitwahl</th>
                <th>Drittwahl</th>
            {% endfor %}
        </tr>
        {% for course_id, course in courses|dictsort %}
            <tr>
                <td>{{ course['nr']|e }}</td>
                <td>{{ course['title']|e }}</td>
                <td>{{ course['shortname']|e }}</td>
                {% for part_id, part in ambience['event']['parts']|dictsort %}
                     <td> {{ assign_counts[course_id][part_id]|e }} </td>
                     {% for i in range(3) %}
                         <td> {{ choice_counts[course_id][(part_id, i)]|e }} </td>
                     {% endfor %}
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
{% endblock %}
