{% extends "web/de/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}

{% macro ml_inner_navigation(data) %}
    <li>
        {{ util.href(cdedblink("ml/show_mailinglist", {'mailinglist_id': data['id']}), data['title']) }}
        <ul>
            {% if data['id'] in user.moderator or is_admin %}
                <li>{{ util.href(cdedblink("ml/view_ml_log", {'mailinglist_id': data['id']}), "Log") }}</li>
                <li>{{ util.href(cdedblink("ml/management", {'mailinglist_id': data['id']}), "Verwalten") }}</li>
                <li>{{ util.href(cdedblink("ml/check_states", {'mailinglist_id': data['id']}), "Statuscheck") }}</li>
            {% endif %}
            {% if is_admin %}
                <li>
                    {{ util.href(cdedblink("ml/change_mailinglist_form", {'mailinglist_id': data['id']}),
                                 "Konfiguration") }}
                </li>
            {% endif %}
        </ul>
    </li>
{% endmacro %}

{% block navigation %}
    <ul>
        <li>
            {{ util.href(cdedblink("core/index"), "Start") }}
            <ul>
                <li>{{ util.href(cdedblink("core/mydata"), "Meine Daten") }}</li>
                <li>{{ util.href(cdedblink("core/change_password_form"), "Passwort Ã¤ndern") }}</li>
            </ul>
        </li>
        {% if "formermember" in user.roles %}
            <li>{{ util.href(cdedblink("cde/index"), "CdE") }}</li>
        {% endif %}
        {% if "event_user" in user.roles %}
            <li>{{ util.href(cdedblink("event/index"), "Veranstaltungen") }}</li>
        {% endif %}
        {% if "ml_user" in user.roles %}
            <li>
                {{ util.href(cdedblink("ml/index"), "Mailinglisten") }}
                <ul>
                    <li>{{ util.href(cdedblink("ml/list_mailinglists"), "Mailinglisten-Ãœbersicht") }}</li>
                    {% if is_admin %}
                        <li>{{ util.href(cdedblink("ml/create_user_form"), "Neuen Nutzer anlegen") }}</li>
                        <li>{{ util.href(cdedblink("ml/user_search_form"), "Nutzersuche") }}</li>
                        <li>{{ util.href(cdedblink("ml/view_log"), "Log") }}</li>
                        <li>{{ util.href(cdedblink("ml/list_all_mailinglists"), "alle Mailinglisten") }}</li>
                        <li>{{ util.href(cdedblink("ml/create_mailinglist_form"), "Mailingliste anlegen") }}</li>
                    {% endif %}
                    {% block inner_navigation %}
                        <!-- for mailinglist specific actions -->
                    {% endblock %}
                </ul>
            </li>
        {% endif %}
        {% if "assembly_user" in user.roles %}
            <li>Versammlung</li>
        {% endif %}
    </ul>
{% endblock %}
