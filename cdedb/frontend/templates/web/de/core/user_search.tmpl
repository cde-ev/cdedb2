{% set sidenav_active='core_manage_users' %}
{% extends "web/de/core/base.tmpl" %}
{% import "web/de/util.tmpl" as util with context %}
{% import "web/de/generic.tmpl" as generic with context %}
{% block javascripthint %}{{ util.javascript_hint() }}{% endblock %}
{% block scripts %}{{ util.cdedb_script('queryform') }}{% endblock %}
{% block title %}Allgemeine Nutzerverwaltung{% endblock %}
{% block breadcrumb %}
{{ util.breadcrumb_link(cdedblink("core/index"), "Start") }}
{{ util.breadcrumb_link(cdedblink("core/user_search"), "Nutzer verwalten", active="True") }}
{% endblock %}
{% block content %}
    {# TODO make abstract template for action area #}
    <div class="panel panel-default">
        <div class="panel-heading"><h3 class="panel-title">Aktionen</h3></div>
        <div class="panel-body">
            <form action="{{ cdedblink('core/admin_show_user')|e }}" method="GET" id="adminshowuserform" style="display: inline-block; width:150px; vertical-align:middle;">
                <input type="hidden" name="realm" value="core" />
                <div class="input-group">
                    <input type="text" name="id_to_show" class="form-control" placeholder="DB-XXXX-X" />
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" title="Suchen">
                            <span class="glyphicon glyphicon-search"></span>
                        </button>
                    </span>
                </div>
            </form>
        </div>
    </div>
    
    <h3>Standardabfragen</h3>
    {% with TITLES = {} %}
        <div>
            {{ util.place_default_queries("core/user_search", default_queries, TITLES) }}
        </div>
    {% endwith %}

    {{ generic.user_search_mask("core", ("pevent_id",)) }}

    {% if values['is_search'] %}
        <h3>Ergebnis -- {{ result|length|e }} {{ result|length|numerus("Eintrag", "Einträge")|e }} gefunden</h3>
        {{ generic.user_search_result(result, "core") }}
    {% endif %}
{% endblock %}
