{% set sidenav_active='assembly_ballots' if ambience['ballot'] else 'assembly_show' %}
{% extends "web/assembly/base.tmpl" %}
{% import "web/util.tmpl" as util with context %}
{% import "web/assembly/util.tmpl" as assembly_util with context %}
{% block scripts %}{{ util.cdedb_script('cdedb_helper.js') }}{% endblock %}
{% set jshint = 'weak' %}
{% block title %}
    {% if ambience['ballot'] %}
        {% trans title=ambience['assembly']['title'] + "/" + ambience['ballot']['title'] %}
            Attachment Details ({{ title }})
        {% endtrans %}
    {% else %}
        {% trans title=ambience['assembly']['title'] %}
            Attachment Details ({{ title }})
        {% endtrans %}
    {% endif %}
    â€“ {{ assembly_util.small_attachment_title(attachment, history, icon=False) }}
{% endblock %}
{% block heading %}
    <h1 class="title">
        {% trans %}
            Attachment Details
        {% endtrans %}
        <small>
            {{ assembly_util.small_attachment_title(attachment, history) }}
        </small>
    </h1>
{% endblock %}
{% block breadcrumb %}
    {{ super() }}
    {{ util.breadcrumb_link(cdedblink("assembly/show_assembly"), ambience['assembly']['title'], icon="bullhorn") }}
    {% if ambience['ballot'] %}
        {{ util.breadcrumb_link(cdedblink("assembly/list_ballots"), gettext("Ballots")) }}
        {{ util.breadcrumb_link(cdedblink("assembly/show_ballot"), ambience['ballot']['title'], icon="thumbs-up") }}
    {% endif %}
    {{ util.breadcrumb_link(cdedblink("assembly/show_attachment"),
                            assembly_util.small_attachment_title(attachment, history, icon=False),
                            active=True, icon="file") }}
    {{ util.breadcrumb_link(cdedblink("assembly/show_attachment"), gettext("Attachment Details"), active=True) }}

{% endblock %}
{% block content %}
    {{ assembly_util.attachment_list({attachment['id']: attachment}, {attachment['id']: history},
                                     ballot=ambience.get('ballot'), edit=("assembly_contents" in user.admin_views)) }}
{% endblock %}
